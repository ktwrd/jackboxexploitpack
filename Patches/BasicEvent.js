module.exports = async (_FileContents) =>
{
var toInject = `
window.JackboxExploitPack = {
  callbackevents: [],
  on: (event,callback) => {
    JackboxExploitPack.callbackevents.push([event,callback]);
  },
  call: (event,...data) => {
    JackboxExploitPack.callbackevents.forEach((e) => { 
      if (e[0] != event) return; 
      e[1](...data) 
    } );
  }
}
var jacksploit = window.JackboxExploitPack;

jacksploit.on('websocket',(data) => {
  // Whenever a websocket event is called this gets ran.
  console.debug("[JackboxExploitPack -> Websocket Message]", data);
});


`
var preInjectLength = _FileContents.length;
_FileContents = toInject + "\n" + _FileContents;

if ((_FileContents - preInjectLength) > 1)
{
  console.log(`[JackboxExploitPack -> Events] Injected`);
} else {
  console.log(`[JackboxExploitPack -> Events] Injection Failed`);
}

	return _FileContents;
}
