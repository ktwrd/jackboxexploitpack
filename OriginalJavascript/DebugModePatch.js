const fs = require('fs');

(async ()=>
{
	if (!fs.existsSync(process.argv[2]))
	{
		console.error("Invalid or Missing File Location as Argument");
		process.exit(1);
	}


	var OrigFile = fs.readFileSync(process.argv[2]);


	// Enable Debug Mode
	OrigFile.replace(`i.DEBUG = !1`,`i.DEBUG = 1`);
	OrigFile.replace(`debug: !1`,`debug: 1`);
	console.log(`[PATCH] Enabled Debug Mode`);

	// Force Debug Log for Websocket Client
	OrigFile.replace('this.debug && console.log(`%c[WSClient:${this.name}]`, "background-color:blue;color:white;", ...t)','console.log(`%c[WSClient:${this.name}]`, "background-color:blue;color:white;", ...t)')
	console.log(`[PATCH -> WSClient] Force Debug Log`);

	fs.writeFileSync(`patched.bundle.js`,OrigFile);
})();
